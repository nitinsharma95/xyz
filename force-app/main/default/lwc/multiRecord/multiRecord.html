<template>
    <lightning-card title="All Object">
        <div class="slds-p-horizontal_medium">
            <lightning-combobox
               name="progress"
               label="Object PickList"
               value={value}
               placeholder="Select Object"
               options={objList}
               onchange={handleChange} >
            </lightning-combobox>    
</div>
<!-- </lightning-card> -->
            <div class="slds-p-around_small">
                        <lightning-dual-listbox 
                            name="languages"
                            label="Select Fields"
                            source-label="Fields Available"
                            selected-label="Selected Fields"
                            field-level-help="Select your preferred Field"
                            options={lstOptions}
                            value={selectedValue}
                            onchange={handleFetch}>
                        </lightning-dual-listbox>
                            <br/>
                            <template if:true={lstSelected}>
                                <strong>You Selected: </strong>
                                <template for:each={lstSelected} for:item="sel">
                                    <p key={sel}>{sel}</p>
                                </template>
                            </template>
                    </div>
                     <div class="slds-form-element buttons slds-text-align_center">
                        <!-- <div class="slds-button-k buttons slds-text-align_center"> -->
                    <lightning-button
                     variant="brand"
                    label="New"
                    title="Primary action"
                    onclick={handleClick}
                    class="slds-m-left_x-small">
                    </lightning-button>
                    
                    
                    <lightning-button
                         variant="brand"
                        label="Save"
                        title="Primary action"
                        onclick={handleSave}
                        class="slds-m-left_x-small">
                    </lightning-button>
                    </div>
                    <template if:true={isEditForm}>
                      <!-- Modal/Popup Box LWC starts here -->
                      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-02" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                          <div class="slds-modal__container">
                              <!-- Modal/Popup Box LWC header here -->
                              <header class="slds-modal__header">
                                  <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                                      <lightning-icon icon-name="utility:close"
                                          alternative-text="close"
                                          variant="inverse"
                                          size="small" ></lightning-icon>
                                      <span class="slds-assistive-text">Close</span>
                                  </button>
                                  <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">Create New {value}</h2>
                              </header>
                              <!-- Modal/Popup Box LWC body starts here -->
                              <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2">
                                  <lightning-record-edit-form record-id={objectRecordId} object-api-name={editObjectValue} mode="edit" onsuccess={handleSuccess}>
                                  <template for:each={selectedValue} for:item="val" for:index="index">
                                      <lightning-input-field key={val} field-name={val}> </lightning-input-field>
                                  </template>
                              </lightning-record-edit-form>
                              </div>
                              <!-- Modal/Popup Box LWC footer starts here -->
                              <footer class="slds-modal__footer">
                                  <button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Cancel</button>
                                  &nbsp;&nbsp;
                                  <lightning-button variant="brand" type="submit" label="Save" onclick={handleSubmit}></lightning-button>
                              </footer>
                          </div>
                      </section>
                      <div class="slds-backdrop slds-backdrop_open"></div>
                  </template>

                    <template if:true={isModalOpen}>
                        <!-- Modal/Popup Box LWC starts here -->
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container">
                                <!-- Modal/Popup Box LWC header here -->
                                <header class="slds-modal__header">
                                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                                        <lightning-icon icon-name="utility:close"
                                            alternative-text="close"
                                            variant="inverse"
                                            size="small" ></lightning-icon>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Create New {value}</h2>
                                </header>
                                <!-- Modal/Popup Box LWC body starts here -->
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                    <lightning-record-edit-form  object-api-name={value} onsuccess={handleSuccess}>
                                    <template for:each={selectedValue} for:item="val" for:index="index">
                                        <lightning-input-field key={val} field-name={val}> </lightning-input-field>
                                    </template>
                                </lightning-record-edit-form>
                                </div>
                                <!-- Modal/Popup Box LWC footer starts here -->
                                <footer class="slds-modal__footer">
                                    <button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Cancel</button>
                                    &nbsp;&nbsp;
                                    <lightning-button variant="brand" type="submit" label="Save" onclick={handleSubmit}></lightning-button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>
                    <br>
                    <template if:true = {isData}>  
                        <div style="height: 300px;">  
                            <lightning-datatable key-field="Id"
                                                    id={listRecs.Id}   
                                                    data={listRecs}  
                                                    columns={columns}
                                                    onrowaction={handleRowAction}>  
                              </lightning-datatable>  
                        </div>                                  
                    </template>  
            </lightning-card>
</template>